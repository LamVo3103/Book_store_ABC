<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh To√°n - Nh√† S√°ch ABC</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      .checkout-container {
        max-width: 1000px;
        margin: 30px auto;
        padding: 20px;
        display: flex;
        gap: 30px;
      }

      .checkout-form {
        flex: 2;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      }

      .order-summary {
        flex: 1;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        align-self: flex-start;
      }

      .section-title {
        font-size: 22px;
        color: #0d47a1;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e3f2fd;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
      }

      .payment-methods {
        margin-top: 30px;
      }

      .payment-option {
        display: flex;
        align-items: center;
        padding: 15px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .payment-option:hover {
        border-color: #1976d2;
        background-color: #f5f9ff;
      }

      .payment-option input {
        margin-right: 15px;
      }

      .payment-icon {
        font-size: 24px;
        margin-right: 15px;
        width: 40px;
        text-align: center;
      }

      .payment-info h4 {
        margin: 0 0 5px 0;
        color: #0d47a1;
      }

      .payment-info p {
        margin: 0;
        color: #666;
        font-size: 14px;
      }

      .order-items {
        margin-bottom: 20px;
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px dashed #eee;
      }

      .order-total {
        font-size: 18px;
        font-weight: bold;
        color: #0d47a1;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 2px solid #e3f2fd;
        display: flex;
        justify-content: space-between;
      }

      .submit-btn {
        width: 100%;
        padding: 15px;
        background-color: #2ecc71;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        transition: background-color 0.3s;
      }

      .submit-btn:hover {
        background-color: #27ae60;
      }

      .bank-info {
        display: none;
        margin-top: 15px;
        padding: 15px;
        background-color: #f9f9f9;
        border-radius: 5px;
        border-left: 4px solid #1976d2;
      }

      .bank-info p {
        margin: 5px 0;
        font-size: 14px;
      }

      .bank-info strong {
        color: #0d47a1;
      }

      @media (max-width: 768px) {
        .checkout-container {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <!-- HEADER (Gi·ªëng c√°c trang kh√°c) -->
    <header>
      <a href="index.html">
        <div class="logo">
          <h1>Nh√† S√°ch ABC</h1>
        </div>
      </a>

      <nav class="nav-menu">
        <ul>
          <li><a href="index.html" style="color: #fbbf24">Trang Ch·ªß</a></li>
          <li><a href="tatcasanpham.html">S·∫£n Ph·∫©m</a></li>
          <li><a href="#footer">Li√™n H·ªá</a></li>
          <li>
            <a href="cacdonhang.html"> ƒê∆°n h√†ng</a>
          </li>
          <li><a href="theodoidonhang.html">Theo d√µi ƒë∆°n h√†ng</a></li>
        </ul>
      </nav>

      <!-- B·ªè search-cart v√† user-actions v√†o 1 container chung -->
      <div class="header-right">
        <div class="search-cart">
          <input type="text" placeholder="T√¨m ki·∫øm s√°ch..." />
          <button>T√¨m</button>
          <a href="#" class="cart">üõí</a>
        </div>

        <div class="user-actions">
          <div class="auth-dropdown">
            <button class="auth-btn" id="userMenuBtn">
              <i class="fas fa-user"></i> T√†i kho·∫£n
            </button>
            <div class="auth-dropdown-content">
              <a href="account.html"><i class="fas fa-user"></i> T√†i kho·∫£n</a>
              <a href="giohang.html"
                ><i class="fas fa-shopping-cart"></i> Gi·ªè h√†ng</a
              >
              <a href="#" id="logoutLink"
                ><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a
              >
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- N·ªôi dung thanh to√°n -->
    <div class="checkout-container">
      <div class="checkout-form">
        <h2 class="section-title">Th√¥ng tin thanh to√°n</h2>

        <div class="form-group">
          <label for="fullname">H·ªç v√† t√™n</label>
          <input type="text" id="fullname" required />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" required />
        </div>

        <div class="form-group">
          <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
          <input type="tel" id="phone" required />
        </div>

        <div class="form-group">
          <label for="address">ƒê·ªãa ch·ªâ nh·∫≠n h√†ng</label>
          <textarea id="address" rows="3" required></textarea>
        </div>

        <div class="form-group">
          <label for="note">Ghi ch√∫ (n·∫øu c√≥)</label>
          <textarea id="note" rows="2"></textarea>
        </div>

        <div class="payment-methods">
          <h2 class="section-title">Ph∆∞∆°ng th·ª©c thanh to√°n</h2>

          <label class="payment-option">
            <input type="radio" name="payment" value="cod" checked />
            <div class="payment-icon">
              <i class="fas fa-money-bill-wave" style="color: #4caf50"></i>
            </div>
            <div class="payment-info">
              <h4>Thanh to√°n khi nh·∫≠n h√†ng (COD)</h4>
              <p>B·∫°n ch·ªâ thanh to√°n khi ƒë√£ nh·∫≠n ƒë∆∞·ª£c h√†ng</p>
            </div>
          </label>

          <label class="payment-option">
            <input type="radio" name="payment" value="bank" />
            <div class="payment-icon">
              <i class="fas fa-university" style="color: #2196f3"></i>
            </div>
            <div class="payment-info">
              <h4>Chuy·ªÉn kho·∫£n ng√¢n h√†ng</h4>
              <p>Chuy·ªÉn kho·∫£n tr∆∞·ªõc khi giao h√†ng</p>
            </div>
          </label>
          <div id="bank-info" class="bank-info">
            <p><strong>Ng√¢n h√†ng:</strong> Vietcombank</p>
            <p><strong>S·ªë t√†i kho·∫£n:</strong> 123456789</p>
            <p><strong>Ch·ªß t√†i kho·∫£n:</strong> NHA SACH ABC</p>
            <p><strong>Chi nh√°nh:</strong> H√† N·ªôi</p>
            <p><strong>N·ªôi dung chuy·ªÉn kho·∫£n:</strong> T√™n_SƒêT</p>
          </div>

          <label class="payment-option">
            <input type="radio" name="payment" value="momo" />
            <div class="payment-icon">
              <i class="fas fa-mobile-alt" style="color: #9c27b0"></i>
            </div>
            <div class="payment-info">
              <h4>V√≠ ƒëi·ªán t·ª≠ MoMo</h4>
              <p>Qu√©t QR code ƒë·ªÉ thanh to√°n</p>
            </div>
          </label>

          <label class="payment-option">
            <input type="radio" name="payment" value="zalopay" />
            <div class="payment-icon">
              <i class="fas fa-wallet" style="color: #03a9f4"></i>
            </div>
            <div class="payment-info">
              <h4>ZaloPay</h4>
              <p>Thanh to√°n qua ·ª©ng d·ª•ng ZaloPay</p>
            </div>
          </label>
        </div>

        <button type="submit" class="submit-btn" onclick="submitOrder()">
          HO√ÄN T·∫§T ƒê∆†N H√ÄNG
        </button>
      </div>

      <div class="order-summary">
        <h2 class="section-title">ƒê∆°n h√†ng c·ªßa b·∫°n</h2>

        <div class="order-items" id="order-items">
          <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
        </div>

        <div class="order-total">
          <span>T·ªïng c·ªông:</span>
          <span id="order-total">0ƒë</span>
        </div>
      </div>
    </div>

    <footer class="footer" id="footer">
      <div class="footer-container">
        <div class="footer-column-left">
          <h1>Nh√† S√°ch ABC</h1>
          <p>189 Cao L·ªó Ph∆∞·ªùng 4 Qu·∫≠n 8 TP HCM</p>
          <p>
            Fahasa.com nh·∫≠n ƒë·∫∑t h√†ng tr·ª±c tuy·∫øn v√† giao h√†ng t·∫≠n n∆°i. KH√îNG h·ªó
            tr·ª£ ƒë·∫∑t mua v√† nh·∫≠n h√†ng tr·ª±c ti·∫øp t·∫°i vƒÉn ph√≤ng c≈©ng nh∆∞ t·∫•t c·∫£ H·ªá
            Th·ªëng Fahasa tr√™n to√†n qu·ªëc.
          </p>
          <div class="social-logo">
            <img
              src="https://cdn0.fahasa.com/skin/frontend/ma_vanese/fahasa/images/footer/Facebook-on.png"
            />
            <img
              src="https://cdn0.fahasa.com/skin/frontend/ma_vanese/fahasa/images//footer/Youtube-on.png"
            />
          </div>
        </div>
        <!-- D·ªãch v·ª• -->
        <div class="footer-column-right mobile-collapsible">
          <h3 onclick="location.href='dichvu.html'">D·ªäCH V·ª§</h3>
          <div class="mobile-hide">
            <p>ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</p>
            <p>Ch√≠nh s√°ch b·∫£o m·∫≠t th√¥ng tin c√° nh√¢n</p>
            <p>Ch√≠nh s√°ch b·∫£o m·∫≠t thanh to√°n</p>
            <p>Gi·ªõi thi·ªáu</p>
            <p>H·ªá th·ªëng trung t√¢m - nh√† s√°ch</p>
          </div>
        </div>

        <!-- Ch√≠nh s√°ch -->
        <div class="footer-column-right mobile-collapsible">
          <h3 onclick="location.href='chinhsach.html'">H·ªñ TR·ª¢</h3>
          <div class="mobile-hide">
            <p>Ch√≠nh s√°ch ƒë·ªïi - tr·∫£ - ho√†n ti·ªÅn</p>
            <p>Ch√≠nh s√°ch b·∫£o h√†nh - b·ªìi ho√†n</p>
            <p>Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</p>
            <p>Ch√≠nh s√°ch kh√°ch s·ªâ</p>
          </div>
        </div>

        <!-- T√†i kho·∫£n -->
        <div class="footer-column-right mobile-collapsible">
          <h3 onclick="location.href='login.html'">T√ÄI KHO·∫¢N C·ª¶A T√îI</h3>
          <div class="mobile-hide">
            <p>ƒêƒÉng nh·∫≠p / T·∫°o m·ªõi t√†i kho·∫£n</p>
            <p>Thay ƒë·ªïi ƒë·ªãa ch·ªâ kh√°ch h√†ng</p>
            <p>Chi ti·∫øt t√†i kho·∫£n</p>
            <p>Gi·ªè h√†ng</p>
          </div>
        </div>

        <div class="footer-column-right">
          <h3>LI√äN H·ªÜ</h3>
          <i class="fas fa-map-marker-alt fa-lg"></i>
          <span>189 Cao L·ªó P4, Q8, TP HCM</span>
        </div>
        <div class="footer-column-right">
          <h4>&nbsp;</h4>
          <i class="fas fa-envelope fa-lg"></i>
          <span>cskh@abc.com.vn</span>
        </div>
        <div class="footer-column-right">
          <h4>&nbsp;</h4>
          <i class="fas fa-phone fa-lg"></i>
          <span>0987654321</span>
        </div>
        <div class="logo">
          <img
            src="https://cdn0.fahasa.com/media/wysiwyg/Logo-NCC/Logo_ninjavan.png"
            width="150px"
          />
        </div>
        <div class="logo">
          <img
            src="https://cdn1.fahasa.com/media//wysiwyg/Logo-NCC/momopay.png"
            height="50px"
          />
        </div>
        <div class="logo">
          <img
            src="https://cdn1.fahasa.com/media//wysiwyg/Logo-NCC/logo_zalopay_2.png"
            height="40px"
          />
        </div>

        <div class="credits">
          <p>&copy; Nh√† s√°ch ABC</p>
        </div>
      </div>
    </footer>

    <script>
      // L·∫•y d·ªØ li·ªáu gi·ªè h√†ng t·ª´ localStorage
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const shippingFee = 20000; // Ph√≠ v·∫≠n chuy·ªÉn

      // Hi·ªÉn th·ªã s·∫£n ph·∫©m trong ƒë∆°n h√†ng
      function displayOrderSummary() {
        const orderItemsEl = document.getElementById("order-items");
        let subtotal = 0;

        // X√≥a n·ªôi dung c≈©
        orderItemsEl.innerHTML = "";

        if (cart.length === 0) {
          orderItemsEl.innerHTML =
            "<p>Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè h√†ng</p>";
          document.getElementById("order-total").textContent = "0ƒë";
          return;
        }

        // Th√™m t·ª´ng s·∫£n ph·∫©m v√†o ƒë∆°n h√†ng
        cart.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          subtotal += itemTotal;

          const itemEl = document.createElement("div");
          itemEl.className = "order-item";
          itemEl.innerHTML = `
                    <span>${item.name} x ${item.quantity}</span>
                    <span>${itemTotal.toLocaleString("vi-VN")}ƒë</span>
                `;
          orderItemsEl.appendChild(itemEl);
        });

        // Th√™m ph√≠ v·∫≠n chuy·ªÉn
        const shippingEl = document.createElement("div");
        shippingEl.className = "order-item";
        shippingEl.innerHTML = `
                <span>Ph√≠ v·∫≠n chuy·ªÉn</span>
                <span>${shippingFee.toLocaleString("vi-VN")}ƒë</span>
            `;
        orderItemsEl.appendChild(shippingEl);

        // T√≠nh t·ªïng c·ªông
        const total = subtotal + shippingFee;
        document.getElementById(
          "order-total"
        ).textContent = `${total.toLocaleString("vi-VN")}ƒë`;
      }

      // Hi·ªÉn th·ªã th√¥ng tin ng√¢n h√†ng khi ch·ªçn ph∆∞∆°ng th·ª©c chuy·ªÉn kho·∫£n
      document.querySelectorAll('input[name="payment"]').forEach((radio) => {
        radio.addEventListener("change", function () {
          const bankInfo = document.getElementById("bank-info");
          if (this.value === "bank") {
            bankInfo.style.display = "block";
          } else {
            bankInfo.style.display = "none";
          }
        });
      });

      // X·ª≠ l√Ω khi nh·∫•n n√∫t ho√†n t·∫•t ƒë∆°n h√†ng
      document
        .querySelector(".submit-btn")
        .addEventListener("click", function (e) {
          e.preventDefault();

          if (cart.length === 0) {
            alert("Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng!");
            return;
          }

          // Ki·ªÉm tra th√¥ng tin b·∫Øt bu·ªôc
          const fullname = document.getElementById("fullname").value;
          const email = document.getElementById("email").value;
          const phone = document.getElementById("phone").value;
          const address = document.getElementById("address").value;

          if (!fullname || !email || !phone || !address) {
            alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc");
            return;
          }

          // L·∫•y ph∆∞∆°ng th·ª©c thanh to√°n ƒë√£ ch·ªçn
          const paymentMethod = document.querySelector(
            'input[name="payment"]:checked'
          ).value;
          let paymentMethodName = "";

          switch (paymentMethod) {
            case "cod":
              paymentMethodName = "Thanh to√°n khi nh·∫≠n h√†ng (COD)";
              break;
            case "bank":
              paymentMethodName = "Chuy·ªÉn kho·∫£n ng√¢n h√†ng";
              break;
            case "momo":
              paymentMethodName = "V√≠ ƒëi·ªán t·ª≠ MoMo";
              break;
            case "zalopay":
              paymentMethodName = "ZaloPay";
              break;
          }

          // T·∫°o ƒë∆°n h√†ng
          const order = {
            customer: { fullname, email, phone, address },
            items: cart,
            paymentMethod,
            total: calculateTotal(),
            date: new Date().toISOString(),
          };

          // L∆∞u ƒë∆°n h√†ng v√†o localStorage (c√≥ th·ªÉ g·ª≠i l√™n server trong th·ª±c t·∫ø)
          saveOrder(order);

          // X√≥a gi·ªè h√†ng
          localStorage.removeItem("cart");

          // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
          alert(
            `ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t th√†nh c√¥ng!\nPh∆∞∆°ng th·ª©c thanh to√°n: ${paymentMethodName}`
          );

          // Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ch·ªß
          window.location.href = "index.html";
        });

      // T√≠nh t·ªïng ti·ªÅn
      function calculateTotal() {
        const subtotal = cart.reduce(
          (total, item) => total + item.price * item.quantity,
          0
        );
        return subtotal + shippingFee;
      }

      // L∆∞u ƒë∆°n h√†ng (trong th·ª±c t·∫ø n√™n g·ª≠i l√™n server)
      function saveOrder(order) {
        let orders = JSON.parse(localStorage.getItem("orders")) || [];
        orders.push(order);
        localStorage.setItem("orders", JSON.stringify(orders));
      }

      // Kh·ªüi t·∫°o khi trang ƒë∆∞·ª£c t·∫£i
      document.addEventListener("DOMContentLoaded", displayOrderSummary);

      const order = {
        customer: { fullname, email, phone, address },
        items: [...cart], // Sao ch√©p gi·ªè h√†ng hi·ªán t·∫°i
        paymentMethod,
        total: calculateTotal(),
        date: new Date().toISOString(),
        status: "pending", // Th√™m tr·∫°ng th√°i ban ƒë·∫ßu
      };
    </script>
  </body>
</html>
